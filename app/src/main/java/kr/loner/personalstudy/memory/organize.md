# 공부 참고 문서 on 2023-07-02
[안드로이드 메모리 개요](https://developer.android.com/topic/performance/memory-overview?hl=ko) 

### 개인 궁금증 & 답변
###### Q.    
"ART 또는 Dalvik 가상 머신과 같은 관리된 메모리 환경에서는 각 메모리 할당을 계속 추적합니다." 라고 언급되어 있다.   
그럼 ART 와 Dalvik 은 한 기기에서 같이 실행될 수 있는건가?   
   
A.    
아니다. 둘중 하나만 사용하게 된다. 현대 기기는 보통 ART 를 쓴다. Dalvik 은 자바코드를 JIT 로 처음에 바이트 코드로 컴파일을 하고   
런타임 도중에 바이트코드를 기계어로 변환해서 사용해서 런타임에 부담이 간다.   
4.4 버전 이후에는 ART 가 등장했다. 5.0부터 공식적으로 쓰기 시작했다. ART는 컴파일 시점에 Java -> 바이트코드 -> 기계어를 한번에 다해놔서   
런타임 사용시 성능이 매우 좋다. 하지만 단점으로 저장 공간이 많이 늘어난다.   
   
      
###### Q. 
앱 프로세스는 Zygote라는 기존 프로세스에서 포크된다고 하는데 프로세스를 포크하면 자원은 스택 빼고 다 공유하는게 맞았었나?   
   
A.
맞다. 복제한 프로세스 힙 데이터를 바꾸면 원본 프로세스 힙 데이터도 변경이 된다. 하지만 안드로이드는 Zygote 프로세스를 포크를해서 새로운 프로세스를 생성한다.    
그래서 공유는 되지 않고 독립된 메모리 공간을 가지게 된다. 이는 다중 프로세스를 구현하기 위함인데 보안,안전성,자원 관리의 효율을 높여준다. 
      
   
###### Q.   
안드로이드는 명시적으로 할당된 공유 메모리 영역을 사용하는 프로세스에서 동일한 RAM을 공유한다는데 이럴거면 Zygote 를 포크만해서 쓰는게 낫지 않아?   
   
A. 
시스템 수준에서 독립된 공간을 쓰기 위해서 포크를 하고 새로운 프로세스를 생성하는 것임, 위의 경우는 여러 앱이 독립적으로 실행되는 상황에서 애니메이션이나 전환 효과를   
부드럽게 하기위해서 일부를 공유메모리의 RAM을 사용하는 것임   

